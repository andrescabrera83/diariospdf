{% extends "base.html" %}

{% block title %}DiariosPDF{% endblock %}

{% block content %}


    <style>
        /* Example loading animation */
        .loader {
            border: 8px solid #f3f3f3; /* Light grey */
            border-top: 8px solid #3498db; /* Blue */
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="loader"></div>
    <p>Loading...</p>

    <!-- Hidden input fields to store parameters -->
    <input type="hidden" id="filename" value="{{ filename }}">
    <input type="hidden" id="keyword_info_encoded" value="{{ keyword_info_encoded }}">

    <!-- Add your JavaScript to send request and redirect here -->
    <script>
        window.onload = function() {
            var filename = document.getElementById('filename').value;
            var keywordInfoEncoded = document.getElementById('keyword_info_encoded').value;

            // Send request to PDF processing route
            fetch('/upload', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    filename: filename,
                    keywordInfoEncoded: keywordInfoEncoded
                })
            }).then(response => {
                // Redirect to download page once processing is complete
                window.location.href = '/download';
            });
        }
    </script>
</body>


{% endblock %}