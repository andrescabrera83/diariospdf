{% extends "base.html" %}

{% block title %}DiariosPDF{% endblock %}

{% block content %}
<div class="container">

    <div class="welcome-paragraph">

        <p style="font-size: 19px;">Bem-vindo <strong>Usuario</strong>. </p>
        <p style="font-size: 19px;"> Consulte e marque sua busca nos diários PDF´s facilmente.</p>

    </div>

    <div style="width: 100%; padding: 12px;">

        <hr color="black">

    </div>

    <div class="form-stuff">

        <form method="POST" action="{{ url_for('upload_file') }}">

            <div class="select-diario">

                <label for="select-diario-input">1. Selecione Um Diário</label>
                <select name="select-diario-input" id="select-diario-input" required>

                    <option value="DOU-MG">DOU-MG</option>

                </select>

            </div>

            <div class="select-pdf">

                <p style="align-self: start;">2. Selecione O Arquivo PDF</p>
                <table id="table1">
                    <thead>
                        <tr>
                            <th style="width: 62%; text-align: start;">Arquivo Pdf</th>
                            <th>Data</th>
                            <th>Diário</th>
                        </tr>
                    </thead>
                    <tbody>
                        {%if not today %}
                        <tr>
                            <td colspan="4" style="color: rgb(172, 172, 172); padding-inline: 28px; !important">
                                Sem Diarios Publicados Hoje
                            </td>
                        </tr>
                        {% endif %}
                        {% for pdf_file in today %}
                        <tr>
                            <td style="text-align: start; vertical-align: middle; font-size: 19px;">
                                <input type="radio" class="table1-input radio-button-large" name="file_names[]" value="{{ pdf_file }}">
                                {{ pdf_file }}
                            </td>
                            <td>
                                hoje
                            </td>
                            <td>
                                DOU-MG
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <table id="table2" style="display: none;">
                    <thead>
                        <tr>
                            <th style="width: 62%; text-align: start;">Arquivo Pdf</th>
                            <th>Data</th>
                            <th>Diário</th>
                        </tr>
                    </thead>
                    <tbody>
                        {%if not pdf_files %}
                        <tr>
                            <td colspan="4" style="color: rgb(172, 172, 172); padding-inline: 28px; !important">
                                Sem Arquivos - Contate Suporte
                            </td>
                        </tr>
                        {% endif %}
                        {% for pdf_file in pdf_files %}
                        <tr>
                            <td style="text-align: start; vertical-align: middle; font-size: 19px;">
                                <input type="radio" class="table2-input radio-button-large" name="file_names[]" value="{{ pdf_file }}">
                                {{ pdf_file }}
                            </td>
                            <td>
                                hoje
                            </td>
                            <td>
                                DOU-MG
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <script>
                    $(document).ready(function () {
                        $("#toggleButton").click(function (event) {
                            event.preventDefault(); // Prevent default behavior
                            $("#table1").toggle();
                            $("#table2").toggle();
                            // Toggle the 'required' attribute for inputs based on table visibility
                            $(".table1-input").prop("required", $("#table1").is(":visible"));
                            $(".table2-input").prop("required", $("#table2").is(":visible"));
                        });
                    });
                </script>


                <div style="align-self: end; text-decoration: underline; color: blue; margin-block: 0.4rem;">
                    <button id="toggleButton">Selecionar Anteriores</button>
                </div>

            </div>

            <div class="text-area-container">

                <p style="align-self: start;" class="instrc-3">3. Insira as palavras-chaves embaixo:</p>

                <textarea name="palavras-chaves" id="myTextarea" rows="6" required
                    placeholder="Colar Palavras Chaves Aqui..."></textarea>

                <p style="align-self: start; margin: 0; color: gray;">*Palavras-chaves separadas por linha.</p>
                <p style="align-self: start; margin: 0; color: gray;">**Tenha em conta acentos.</p>

            </div>

            <div style="display: flex; width: 80%; justify-content: end;">
                <button type="submit" class="button-submit">Consultar
                </button>
            </div>

        </form>

    </div>


</div>


{% endblock %}